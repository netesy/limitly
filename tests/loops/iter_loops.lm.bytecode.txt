Bytecode for C:\Projects\limitly\tests\loops\iter_loops.lm
Parser: New CSTParser
========================================

=== Bytecode ===
Generated 221 instructions

   0: PUSH_STRING          "=== Iter Loop Tests ==="
   1: PRINT               
   2: PUSH_STRING          "Basic range (1 to 5):"
   3: PRINT               
   4: PUSH_INT             1
   5: PUSH_INT             6
   6: CREATE_RANGE        
   7: GET_ITERATOR        
   8: STORE_TEMP          
   9: LOAD_TEMP           
  10: ITERATOR_HAS_NEXT   
  11: JUMP_IF_FALSE        13
  12: LOAD_TEMP           
  13: ITERATOR_NEXT       
  14: STORE_VAR            "i"
  15: BEGIN_SCOPE         
  16: PUSH_STRING         
  17: LOAD_VAR             "i"
  18: PUSH_STRING         
  19: CONCAT              
  20: PUSH_STRING          ""i = {i}"
  21: INTERPOLATE_STRING  
  22: PRINT               
  23: END_SCOPE           
  24: JUMP                 -16
  25: CLEAR_TEMP          
  26: PUSH_STRING          "Range (0 to 3):"
  27: PRINT               
  28: PUSH_INT             0
  29: PUSH_INT             4
  30: CREATE_RANGE        
  31: GET_ITERATOR        
  32: STORE_TEMP          
  33: LOAD_TEMP           
  34: ITERATOR_HAS_NEXT   
  35: JUMP_IF_FALSE        13
  36: LOAD_TEMP           
  37: ITERATOR_NEXT       
  38: STORE_VAR            "x"
  39: BEGIN_SCOPE         
  40: PUSH_STRING         
  41: LOAD_VAR             "x"
  42: PUSH_STRING         
  43: CONCAT              
  44: PUSH_STRING          ""x = {x}"
  45: INTERPOLATE_STRING  
  46: PRINT               
  47: END_SCOPE           
  48: JUMP                 -16
  49: CLEAR_TEMP          
  50: PUSH_STRING          "Nested iter loops:"
  51: PRINT               
  52: PUSH_INT             1
  53: PUSH_INT             3
  54: CREATE_RANGE        
  55: GET_ITERATOR        
  56: STORE_TEMP          
  57: LOAD_TEMP           
  58: ITERATOR_HAS_NEXT   
  59: JUMP_IF_FALSE        31
  60: LOAD_TEMP           
  61: ITERATOR_NEXT       
  62: STORE_VAR            "i"
  63: BEGIN_SCOPE         
  64: PUSH_INT             10
  65: PUSH_INT             12
  66: CREATE_RANGE        
  67: GET_ITERATOR        
  68: STORE_TEMP          
  69: LOAD_TEMP           
  70: ITERATOR_HAS_NEXT   
  71: JUMP_IF_FALSE        16
  72: LOAD_TEMP           
  73: ITERATOR_NEXT       
  74: STORE_VAR            "j"
  75: BEGIN_SCOPE         
  76: PUSH_STRING         
  77: LOAD_VAR             "i"
  78: PUSH_STRING         
  79: CONCAT              
  80: LOAD_VAR             "j"
  81: PUSH_STRING         
  82: CONCAT              
  83: PUSH_STRING          ")"
  84: INTERPOLATE_STRING  
  85: PRINT               
  86: END_SCOPE           
  87: JUMP                 -19
  88: CLEAR_TEMP          
  89: END_SCOPE           
  90: JUMP                 -34
  91: CLEAR_TEMP          
  92: PUSH_STRING          "Mixed loops (for outer, iter inner):"
  93: PRINT               
  94: BEGIN_SCOPE         
  95: PUSH_INT             0
  96: STORE_VAR            "i"
  97: LOAD_VAR             "i"
  98: PUSH_INT             2
  99: LESS                
 100: JUMP_IF_FALSE        36
 101: JUMP                 7
 102: LOAD_VAR             "i"
 103: PUSH_INT             1
 104: ADD                 
 105: DUP                 
 106: STORE_VAR            "i"
 107: POP                 
 108: JUMP                 -12
 109: BEGIN_SCOPE         
 110: PUSH_INT             5
 111: PUSH_INT             7
 112: CREATE_RANGE        
 113: GET_ITERATOR        
 114: STORE_TEMP          
 115: LOAD_TEMP           
 116: ITERATOR_HAS_NEXT   
 117: JUMP_IF_FALSE        16
 118: LOAD_TEMP           
 119: ITERATOR_NEXT       
 120: STORE_VAR            "j"
 121: BEGIN_SCOPE         
 122: PUSH_STRING         
 123: LOAD_VAR             "i"
 124: PUSH_STRING         
 125: CONCAT              
 126: LOAD_VAR             "j"
 127: PUSH_STRING         
 128: CONCAT              
 129: PUSH_STRING          ")"
 130: INTERPOLATE_STRING  
 131: PRINT               
 132: END_SCOPE           
 133: JUMP                 -19
 134: CLEAR_TEMP          
 135: END_SCOPE           
 136: JUMP                 -35
 137: END_SCOPE           
 138: PUSH_STRING          "Mixed loops (iter outer, for inner):"
 139: PRINT               
 140: PUSH_INT             1
 141: PUSH_INT             3
 142: CREATE_RANGE        
 143: GET_ITERATOR        
 144: STORE_TEMP          
 145: LOAD_TEMP           
 146: ITERATOR_HAS_NEXT   
 147: JUMP_IF_FALSE        35
 148: LOAD_TEMP           
 149: ITERATOR_NEXT       
 150: STORE_VAR            "i"
 151: BEGIN_SCOPE         
 152: BEGIN_SCOPE         
 153: PUSH_INT             0
 154: STORE_VAR            "j"
 155: LOAD_VAR             "j"
 156: PUSH_INT             2
 157: LESS                
 158: JUMP_IF_FALSE        21
 159: JUMP                 7
 160: LOAD_VAR             "j"
 161: PUSH_INT             1
 162: ADD                 
 163: DUP                 
 164: STORE_VAR            "j"
 165: POP                 
 166: JUMP                 -12
 167: BEGIN_SCOPE         
 168: PUSH_STRING         
 169: LOAD_VAR             "i"
 170: PUSH_STRING         
 171: CONCAT              
 172: LOAD_VAR             "j"
 173: PUSH_STRING         
 174: CONCAT              
 175: PUSH_STRING          ")"
 176: INTERPOLATE_STRING  
 177: PRINT               
 178: END_SCOPE           
 179: JUMP                 -20
 180: END_SCOPE           
 181: END_SCOPE           
 182: JUMP                 -38
 183: CLEAR_TEMP          
 184: PUSH_INT             2
 185: STORE_VAR            "start"
 186: PUSH_INT             5
 187: STORE_VAR            "end"
 188: PUSH_STRING         
 189: LOAD_VAR             "start"
 190: PUSH_STRING         
 191: CONCAT              
 192: LOAD_VAR             "end"
 193: PUSH_STRING         
 194: CONCAT              
 195: PUSH_STRING          "):"
 196: INTERPOLATE_STRING  
 197: PRINT               
 198: LOAD_VAR             "start"
 199: LOAD_VAR             "end"
 200: CREATE_RANGE        
 201: GET_ITERATOR        
 202: STORE_TEMP          
 203: LOAD_TEMP           
 204: ITERATOR_HAS_NEXT   
 205: JUMP_IF_FALSE        13
 206: LOAD_TEMP           
 207: ITERATOR_NEXT       
 208: STORE_VAR            "k"
 209: BEGIN_SCOPE         
 210: PUSH_STRING         
 211: LOAD_VAR             "k"
 212: PUSH_STRING         
 213: CONCAT              
 214: PUSH_STRING          ""k = {k}"
 215: INTERPOLATE_STRING  
 216: PRINT               
 217: END_SCOPE           
 218: JUMP                 -16
 219: CLEAR_TEMP          
 220: HALT                

