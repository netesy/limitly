Bytecode for tests\loops\for_loops.lm
Parser: New Unified Parser (CST mode)
========================================

=== Bytecode ===
Generated 212 instructions

   0: PUSH_STRING          "=== For Loop Tests ==="
   1: PRINT               
   2: PUSH_STRING          "Basic for loop (0 to 4):"
   3: PRINT               
   4: PUSH_INT             0
   5: STORE_VAR            "i"
   6: BEGIN_SCOPE         
   7: LOAD_VAR             "i"
   8: PUSH_INT             5
   9: LESS                
  10: JUMP_IF_FALSE        18
  11: JUMP                 7
  12: LOAD_VAR             "i"
  13: PUSH_INT             1
  14: ADD                 
  15: DUP                 
  16: STORE_VAR            "i"
  17: POP                 
  18: JUMP                 -12
  19: BEGIN_SCOPE         
  20: PUSH_STRING          "i = "
  21: LOAD_VAR             "i"
  22: PUSH_STRING         
  23: CONCAT              
  24: PUSH_STRING         
  25: INTERPOLATE_STRING  
  26: PRINT               
  27: END_SCOPE           
  28: JUMP                 -17
  29: END_SCOPE           
  30: PUSH_STRING          "For loop with increment 2:"
  31: PRINT               
  32: PUSH_INT             0
  33: STORE_VAR            "j"
  34: BEGIN_SCOPE         
  35: LOAD_VAR             "j"
  36: PUSH_INT             10
  37: LESS                
  38: JUMP_IF_FALSE        18
  39: JUMP                 7
  40: LOAD_VAR             "j"
  41: PUSH_INT             2
  42: ADD                 
  43: DUP                 
  44: STORE_VAR            "j"
  45: POP                 
  46: JUMP                 -12
  47: BEGIN_SCOPE         
  48: PUSH_STRING          "j = "
  49: LOAD_VAR             "j"
  50: PUSH_STRING         
  51: CONCAT              
  52: PUSH_STRING         
  53: INTERPOLATE_STRING  
  54: PRINT               
  55: END_SCOPE           
  56: JUMP                 -17
  57: END_SCOPE           
  58: PUSH_STRING          "Countdown loop:"
  59: PRINT               
  60: PUSH_INT             5
  61: STORE_VAR            "k"
  62: BEGIN_SCOPE         
  63: LOAD_VAR             "k"
  64: PUSH_INT             0
  65: GREATER             
  66: JUMP_IF_FALSE        18
  67: JUMP                 7
  68: LOAD_VAR             "k"
  69: PUSH_INT             1
  70: SUBTRACT            
  71: DUP                 
  72: STORE_VAR            "k"
  73: POP                 
  74: JUMP                 -12
  75: BEGIN_SCOPE         
  76: PUSH_STRING          "k = "
  77: LOAD_VAR             "k"
  78: PUSH_STRING         
  79: CONCAT              
  80: PUSH_STRING         
  81: INTERPOLATE_STRING  
  82: PRINT               
  83: END_SCOPE           
  84: JUMP                 -17
  85: END_SCOPE           
  86: PUSH_STRING          "Complex condition:"
  87: PRINT               
  88: PUSH_INT             1
  89: STORE_VAR            "x"
  90: BEGIN_SCOPE         
  91: LOAD_VAR             "x"
  92: LOAD_VAR             "x"
  93: MULTIPLY            
  94: PUSH_INT             20
  95: LESS                
  96: JUMP_IF_FALSE        24
  97: JUMP                 7
  98: LOAD_VAR             "x"
  99: PUSH_INT             1
 100: ADD                 
 101: DUP                 
 102: STORE_VAR            "x"
 103: POP                 
 104: JUMP                 -14
 105: BEGIN_SCOPE         
 106: PUSH_STRING          "x = "
 107: LOAD_VAR             "x"
 108: PUSH_STRING         
 109: CONCAT              
 110: PUSH_STRING          ", xÂ² = "
 111: LOAD_VAR             "x"
 112: LOAD_VAR             "x"
 113: MULTIPLY            
 114: PUSH_STRING         
 115: CONCAT              
 116: PUSH_STRING         
 117: INTERPOLATE_STRING  
 118: PRINT               
 119: END_SCOPE           
 120: JUMP                 -23
 121: END_SCOPE           
 122: PUSH_STRING          "Nested for loops (2x3 grid):"
 123: PRINT               
 124: PUSH_INT             0
 125: STORE_VAR            "row"
 126: BEGIN_SCOPE         
 127: LOAD_VAR             "row"
 128: PUSH_INT             2
 129: LESS_EQUAL          
 130: JUMP_IF_FALSE        41
 131: JUMP                 7
 132: LOAD_VAR             "row"
 133: PUSH_INT             1
 134: ADD                 
 135: DUP                 
 136: STORE_VAR            "row"
 137: POP                 
 138: JUMP                 -12
 139: BEGIN_SCOPE         
 140: PUSH_INT             0
 141: STORE_VAR            "col"
 142: BEGIN_SCOPE         
 143: LOAD_VAR             "col"
 144: PUSH_INT             3
 145: LESS                
 146: JUMP_IF_FALSE        22
 147: JUMP                 7
 148: LOAD_VAR             "col"
 149: PUSH_INT             1
 150: ADD                 
 151: DUP                 
 152: STORE_VAR            "col"
 153: POP                 
 154: JUMP                 -12
 155: BEGIN_SCOPE         
 156: PUSH_STRING          "("
 157: LOAD_VAR             "row"
 158: PUSH_STRING         
 159: CONCAT              
 160: PUSH_STRING          ", "
 161: LOAD_VAR             "col"
 162: PUSH_STRING         
 163: CONCAT              
 164: PUSH_STRING          ")"
 165: INTERPOLATE_STRING  
 166: PRINT               
 167: END_SCOPE           
 168: JUMP                 -21
 169: END_SCOPE           
 170: END_SCOPE           
 171: JUMP                 -40
 172: END_SCOPE           
 173: PUSH_STRING          "Variable scope test: new Issue"
 174: PRINT               
 175: PUSH_INT             100
 176: STORE_VAR            "outer"
 177: PUSH_INT             0
 178: STORE_VAR            "i"
 179: BEGIN_SCOPE         
 180: LOAD_VAR             "i"
 181: PUSH_INT             4
 182: LESS                
 183: JUMP_IF_FALSE        26
 184: JUMP                 7
 185: LOAD_VAR             "i"
 186: PUSH_INT             1
 187: ADD                 
 188: DUP                 
 189: STORE_VAR            "i"
 190: POP                 
 191: JUMP                 -12
 192: BEGIN_SCOPE         
 193: LOAD_VAR             "i"
 194: PUSH_INT             10
 195: MULTIPLY            
 196: STORE_VAR            "inner"
 197: PUSH_STRING          "outer: "
 198: LOAD_VAR             "outer"
 199: PUSH_STRING         
 200: CONCAT              
 201: PUSH_STRING          ", inner: "
 202: LOAD_VAR             "inner"
 203: PUSH_STRING         
 204: CONCAT              
 205: PUSH_STRING         
 206: INTERPOLATE_STRING  
 207: PRINT               
 208: END_SCOPE           
 209: JUMP                 -25
 210: END_SCOPE           
 211: HALT                

