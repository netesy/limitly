Bytecode for C:\Projects\limitly\tests\errors\common.lm
Parser: New CSTParser
========================================

=== Bytecode ===
Generated 144 instructions

   0: CONSTRUCT_ERROR     
   1: STORE_VAR            "error_result"
   2: PUSH_STRING          "Error result:"
   3: LOAD_VAR             "error_result"
   4: PRINT               
   5: PUSH_INT             42
   6: CONSTRUCT_OK        
   7: STORE_VAR            "success_result"
   8: PUSH_STRING          "Success result:"
   9: LOAD_VAR             "success_result"
  10: PRINT               
  11: BEGIN_FUNCTION       "divide"
  12: DEFINE_PARAM        
  13: DEFINE_PARAM        
  14: BEGIN_SCOPE         
  15: LOAD_VAR             "b"
  16: PUSH_INT             0
  17: EQUAL               
  18: JUMP_IF_FALSE        5
  19: BEGIN_SCOPE         
  20: CONSTRUCT_ERROR     
  21: RETURN              
  22: END_SCOPE           
  23: JUMP                 0
  24: LOAD_VAR             "a"
  25: LOAD_VAR             "b"
  26: DIVIDE              
  27: CONSTRUCT_OK        
  28: RETURN              
  29: END_SCOPE           
  30: PUSH_NULL           
  31: RETURN              
  32: END_FUNCTION        
  33: PUSH_FUNCTION       
  34: STORE_VAR            "divide"
  35: PUSH_INT             10
  36: PUSH_INT             2
  37: CALL                 "divide"
  38: CHECK_ERROR         
  39: JUMP_IF_FALSE        1
  40: PROPAGATE_ERROR     
  41: UNWRAP_VALUE        
  42: STORE_VAR            "result"
  43: PUSH_STRING          "Division result:"
  44: LOAD_VAR             "result"
  45: PRINT               
  46: BEGIN_FUNCTION       "safe_divide"
  47: DEFINE_PARAM        
  48: DEFINE_PARAM        
  49: BEGIN_SCOPE         
  50: LOAD_VAR             "a"
  51: LOAD_VAR             "b"
  52: CALL                 "divide"
  53: CHECK_ERROR         
  54: JUMP_IF_FALSE        1
  55: PROPAGATE_ERROR     
  56: UNWRAP_VALUE        
  57: RETURN              
  58: END_SCOPE           
  59: PUSH_NULL           
  60: RETURN              
  61: END_FUNCTION        
  62: PUSH_FUNCTION       
  63: STORE_VAR            "safe_divide"
  64: PUSH_INT             20
  65: PUSH_INT             2
  66: CALL                 "safe_divide"
  67: CHECK_ERROR         
  68: JUMP_IF_FALSE        1
  69: PROPAGATE_ERROR     
  70: UNWRAP_VALUE        
  71: STORE_VAR            "safe_result"
  72: PUSH_STRING          "Safe division result:"
  73: LOAD_VAR             "safe_result"
  74: PRINT               
  75: BEGIN_FUNCTION       "test_error_propagation"
  76: BEGIN_SCOPE         
  77: PUSH_INT             10
  78: PUSH_INT             2
  79: CALL                 "divide"
  80: CHECK_ERROR         
  81: JUMP_IF_FALSE        1
  82: PROPAGATE_ERROR     
  83: UNWRAP_VALUE        
  84: STORE_VAR            "result"
  85: PUSH_STRING          "Division result:"
  86: LOAD_VAR             "result"
  87: PRINT               
  88: END_SCOPE           
  89: PUSH_NULL           
  90: RETURN              
  91: END_FUNCTION        
  92: PUSH_FUNCTION       
  93: STORE_VAR            "test_error_propagation"
  94: BEGIN_FUNCTION       "parse_number"
  95: DEFINE_PARAM        
  96: BEGIN_SCOPE         
  97: LOAD_VAR             "n"
  98: CONSTRUCT_OK        
  99: RETURN              
 100: END_SCOPE           
 101: PUSH_NULL           
 102: RETURN              
 103: END_FUNCTION        
 104: PUSH_FUNCTION       
 105: STORE_VAR            "parse_number"
 106: BEGIN_FUNCTION       "test_error_handling"
 107: BEGIN_SCOPE         
 108: PUSH_INT             10
 109: PUSH_INT             0
 110: CALL                 "divide"
 111: CHECK_ERROR         
 112: JUMP_IF_TRUE         2
 113: UNWRAP_VALUE        
 114: JUMP                 10
 115: STORE_VAR            "error"
 116: BEGIN_SCOPE         
 117: PUSH_STRING          "Caught error:"
 118: LOAD_VAR             "error"
 119: PRINT               
 120: PUSH_INT             1
 121: NEGATE              
 122: RETURN              
 123: PUSH_NULL           
 124: END_SCOPE           
 125: STORE_VAR            "result"
 126: END_SCOPE           
 127: PUSH_NULL           
 128: RETURN              
 129: END_FUNCTION        
 130: PUSH_FUNCTION       
 131: STORE_VAR            "test_error_handling"
 132: CALL                 "test_error_propagation"
 133: POP                 
 134: CALL                 "test_error_handling"
 135: POP                 
 136: PUSH_INT             20
 137: PUSH_INT             0
 138: CALL                 "safe_divide"
 139: STORE_VAR            "safe_result"
 140: PUSH_STRING          "Safe division result again :"
 141: LOAD_VAR             "safe_result"
 142: PRINT               
 143: HALT                

