AST for C:\Projects\limitly\tests\classes\advance.lm
Parser: New CSTParser (cst_parser.cpp)
Mode: CST with AST compatibility
Note: CST nodes were created internally with trivia preservation
      AST output shown below for compatibility testing
========================================

AST Dump:
==========
PrintStatement:
  Literal: "=== Class Inheritance Tests ==="
ClassDeclaration: Animal
  Methods:
    FunctionDeclaration: init
      Parameters:
        name: str
      Body:
        BlockStatement:
          ExpressionStatement:
            Assignment: =
              Member: name
              Object:
                This
              Value:
              Variable: name
    FunctionDeclaration: speak
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              String: " makes a sound"
    FunctionDeclaration: info
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              String: "\"Animal is {self.name}"
PrintStatement:
  Literal: "Dog Class:"
ClassDeclaration: Dog : Animal(arg0) (inline constructor: name, breed)
  Methods:
    FunctionDeclaration: speak
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              String: " barks!"
    FunctionDeclaration: wagTail
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              String: " wags tail happily"
    FunctionDeclaration: info
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              Expression:
                MemberExpression: .breed
                  Object:
                    This
              String: "\"Dog {self.name} is a {self.breed}"
    FunctionDeclaration: init
      Parameters:
        name: str
        breed: str
      Body:
        BlockStatement:
          ExpressionStatement:
            CallExpression:
              Callee:
                MemberExpression: .init
                  Object:
                    Variable: super
              Arguments:
                Variable: name
          ExpressionStatement:
            Assignment: =
              Member: name
              Object:
                MemberExpression: .name
                  Object:
                    This
              Value:
              Variable: name
          ExpressionStatement:
            Assignment: =
              Member: breed
              Object:
                MemberExpression: .breed
                  Object:
                    This
              Value:
              Variable: breed
PrintStatement:
  Literal: "Cat Class:"
ClassDeclaration: Cat : Animal(arg0) (inline constructor: name)
  Methods:
    FunctionDeclaration: speak
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              String: " meows"
    FunctionDeclaration: purr
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              String: " purrs contentedly"
    FunctionDeclaration: init
      Parameters:
        name: str
      Body:
        BlockStatement:
          ExpressionStatement:
            CallExpression:
              Callee:
                MemberExpression: .init
                  Object:
                    Variable: super
              Arguments:
                Variable: name
          ExpressionStatement:
            Assignment: =
              Member: name
              Object:
                MemberExpression: .name
                  Object:
                    This
              Value:
              Variable: name
ClassDeclaration: SmartDog : Dog(arg0, arg1) (inline constructor: name, breed, iq)
  Methods:
    FunctionDeclaration: speak
      Body:
        BlockStatement:
          ExpressionStatement:
            CallExpression:
              Callee:
                MemberExpression: .speak
                  Object:
                    Super
          PrintStatement:
            Literal: "Woof woof! (intelligently)"
    FunctionDeclaration: solve
      Parameters:
        problem: str
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              Expression:
                Variable: problem
              String: "\"{self.name} solves: {problem}"
    FunctionDeclaration: getIQ
      Body:
        BlockStatement:
          ReturnStatement:
            Value:
              MemberExpression: .iq
                Object:
                  This
    FunctionDeclaration: init
      Parameters:
        name: str
        breed: str
        iq: int
      Body:
        BlockStatement:
          ExpressionStatement:
            CallExpression:
              Callee:
                MemberExpression: .init
                  Object:
                    Variable: super
              Arguments:
                Variable: name
                Variable: breed
          ExpressionStatement:
            Assignment: =
              Member: name
              Object:
                MemberExpression: .name
                  Object:
                    This
              Value:
              Variable: name
          ExpressionStatement:
            Assignment: =
              Member: breed
              Object:
                MemberExpression: .breed
                  Object:
                    This
              Value:
              Variable: breed
          ExpressionStatement:
            Assignment: =
              Member: iq
              Object:
                MemberExpression: .iq
                  Object:
                    This
              Value:
              Variable: iq
ClassDeclaration: Bird : Animal(arg0) (inline constructor: name, species, canFly)
  Methods:
    FunctionDeclaration: speak
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              String: " chirps melodiously"
    FunctionDeclaration: fly
      Body:
        BlockStatement:
          IfStatement:
            Condition:
              MemberExpression: .canFly
                Object:
                  This
            Then:
              BlockStatement:
                PrintStatement:
                  InterpolatedString:
                    String: ""
                    Expression:
                      MemberExpression: .name
                        Object:
                          This
                    String: " soars through the sky"
            Else:
              BlockStatement:
                PrintStatement:
                  InterpolatedString:
                    String: ""
                    Expression:
                      MemberExpression: .name
                        Object:
                          This
                    String: " cannot fly but runs fast"
    FunctionDeclaration: info
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              Expression:
                MemberExpression: .species
                  Object:
                    This
              String: "\"Bird {self.name} is a {self.species}"
    FunctionDeclaration: init
      Parameters:
        name: str
        species: str
        canFly: bool
      Body:
        BlockStatement:
          ExpressionStatement:
            CallExpression:
              Callee:
                MemberExpression: .init
                  Object:
                    Variable: super
              Arguments:
                Variable: name
          ExpressionStatement:
            Assignment: =
              Member: name
              Object:
                MemberExpression: .name
                  Object:
                    This
              Value:
              Variable: name
          ExpressionStatement:
            Assignment: =
              Member: species
              Object:
                MemberExpression: .species
                  Object:
                    This
              Value:
              Variable: species
          ExpressionStatement:
            Assignment: =
              Member: canFly
              Object:
                MemberExpression: .canFly
                  Object:
                    This
              Value:
              Variable: canFly
ClassDeclaration: Fish : Animal(arg0) (inline constructor: name, waterType)
  Methods:
    FunctionDeclaration: speak
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              String: " makes bubbles"
    FunctionDeclaration: swim
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              Expression:
                MemberExpression: .waterType
                  Object:
                    This
              String: " water"
    FunctionDeclaration: info
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              Expression:
                MemberExpression: .waterType
                  Object:
                    This
              String: " water"
    FunctionDeclaration: init
      Parameters:
        name: str
        waterType: str
      Body:
        BlockStatement:
          ExpressionStatement:
            CallExpression:
              Callee:
                MemberExpression: .init
                  Object:
                    Variable: super
              Arguments:
                Variable: name
          ExpressionStatement:
            Assignment: =
              Member: name
              Object:
                MemberExpression: .name
                  Object:
                    This
              Value:
              Variable: name
          ExpressionStatement:
            Assignment: =
              Member: waterType
              Object:
                MemberExpression: .waterType
                  Object:
                    This
              Value:
              Variable: waterType
ClassDeclaration: HybridPet : Animal
  Fields:
    VarDeclaration: species1
      Type: str
    VarDeclaration: species2
      Type: str
    VarDeclaration: age
      Type: int
    VarDeclaration: isValidHybrid
      Type: bool
    VarDeclaration: traits
      Type: [str]
  Methods:
    FunctionDeclaration: init
      Parameters:
        name: str
        species1: str
        species2: str
        age: int
      Body:
        BlockStatement:
          ExpressionStatement:
            CallExpression:
              Callee:
                MemberExpression: .init
                  Object:
                    Super
              Arguments:
                Variable: name
          IfStatement:
            Condition:
              BinaryExpression: and
                Left:
                  BinaryExpression: <
                    Left:
                      Variable: age
                    Operator: <
                    Right:
                      Literal: 0
                Operator: and
                Right:
                  BinaryExpression: >
                    Left:
                      Variable: age
                    Operator: >
                    Right:
                      Literal: 30
            Then:
              BlockStatement:
                PrintStatement:
                  InterpolatedString:
                    String: ""
                    Expression:
                      Variable: age
                    String: "\"Invalid age for hybrid pet: {age}"
          IfStatement:
            Condition:
              BinaryExpression: ==
                Left:
                  Variable: species1
                Operator: ==
                Right:
                  Variable: species2
            Then:
              BlockStatement:
                PrintStatement:
                  InterpolatedString:
                    String: ""
                    Expression:
                      Variable: species1
                    String: "\"Cannot create hybrid from same species: {species1}"
          ExpressionStatement:
            Assignment: =
              Member: species1
              Object:
                This
              Value:
              Variable: species1
          ExpressionStatement:
            Assignment: =
              Member: species2
              Object:
                This
              Value:
              Variable: species2
          ExpressionStatement:
            Assignment: =
              Member: age
              Object:
                This
              Value:
              Variable: age
          ExpressionStatement:
            Assignment: =
              Member: isValidHybrid
              Object:
                This
              Value:
              CallExpression:
                Callee:
                  MemberExpression: .validateHybrid
                    Object:
                      This
          ExpressionStatement:
            Assignment: =
              Member: traits
              Object:
                This
              Value:
              CallExpression:
                Callee:
                  MemberExpression: .generateTraits
                    Object:
                      This
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              Expression:
                MemberExpression: .species1
                  Object:
                    This
              Expression:
                MemberExpression: .species2
                  Object:
                    This
              String: " mix"
          IfStatement:
            Condition:
              UnaryExpression: !
                Operand:
                  MemberExpression: .isValidHybrid
                    Object:
                      This
            Then:
              BlockStatement:
                PrintStatement:
                  Literal: "Warning: Unusual hybrid combination detected"
    FunctionDeclaration: validateHybrid
      Body:
        BlockStatement:
          VarDeclaration: validCombos
            Initializer:
              ListExpression: [6 elements]
                ListExpression: [2 elements]
                  Literal: "Cat"
                  Literal: "Lion"
                ListExpression: [2 elements]
                  Literal: "Dog"
                  Literal: "Wolf"
                ListExpression: [2 elements]
                  Literal: "Horse"
                  Literal: "Donkey"
                ListExpression: [2 elements]
                  Literal: "Tiger"
                  Literal: "Lion"
                ListExpression: [2 elements]
                  Literal: "Cat"
                  Literal: "Tiger"
                ListExpression: [2 elements]
                  Literal: "Dog"
                  Literal: "Fox"
          IterStatement:
            Variables: combo
            Iterable:
              Variable: validCombos
            Body:
              BlockStatement:
                IfStatement:
                  Condition:
                    BinaryExpression: and
                      Left:
                        Grouping:
                          BinaryExpression: <unknown>
                            Left:
                              BinaryExpression: ==
                                Left:
                                  IndexExpression:
                                    Object:
                                      Variable: combo
                                    Index:
                                      Literal: 0
                                Operator: ==
                                Right:
                                  MemberExpression: .species1
                                    Object:
                                      This
                            Operator: <unknown>
                            Right:
                              BinaryExpression: ==
                                Left:
                                  IndexExpression:
                                    Object:
                                      Variable: combo
                                    Index:
                                      Literal: 1
                                Operator: ==
                                Right:
                                  MemberExpression: .species2
                                    Object:
                                      This
                      Operator: and
                      Right:
                        Grouping:
                          BinaryExpression: <unknown>
                            Left:
                              BinaryExpression: ==
                                Left:
                                  IndexExpression:
                                    Object:
                                      Variable: combo
                                    Index:
                                      Literal: 0
                                Operator: ==
                                Right:
                                  MemberExpression: .species2
                                    Object:
                                      This
                            Operator: <unknown>
                            Right:
                              BinaryExpression: ==
                                Left:
                                  IndexExpression:
                                    Object:
                                      Variable: combo
                                    Index:
                                      Literal: 1
                                Operator: ==
                                Right:
                                  MemberExpression: .species1
                                    Object:
                                      This
                  Then:
                    BlockStatement:
                      ReturnStatement:
                        Value:
                          Literal: true
          ReturnStatement:
            Value:
              Literal: false
    FunctionDeclaration: generateTraits
      Body:
        BlockStatement:
          VarDeclaration: traits
            Initializer:
              ListExpression: [0 elements]
          IfStatement:
            Condition:
              BinaryExpression: and
                Left:
                  BinaryExpression: ==
                    Left:
                      MemberExpression: .species1
                        Object:
                          This
                    Operator: ==
                    Right:
                      Literal: "Cat"
                Operator: and
                Right:
                  BinaryExpression: ==
                    Left:
                      MemberExpression: .species2
                        Object:
                          This
                    Operator: ==
                    Right:
                      Literal: "Cat"
            Then:
              BlockStatement:
                ExpressionStatement:
                  CallExpression:
                    Callee:
                      MemberExpression: .append
                        Object:
                          Variable: traits
                    Arguments:
                      Literal: "agile"
                ExpressionStatement:
                  CallExpression:
                    Callee:
                      MemberExpression: .append
                        Object:
                          Variable: traits
                    Arguments:
                      Literal: "independent"
          IfStatement:
            Condition:
              BinaryExpression: and
                Left:
                  BinaryExpression: ==
                    Left:
                      MemberExpression: .species1
                        Object:
                          This
                    Operator: ==
                    Right:
                      Literal: "Dog"
                Operator: and
                Right:
                  BinaryExpression: ==
                    Left:
                      MemberExpression: .species2
                        Object:
                          This
                    Operator: ==
                    Right:
                      Literal: "Dog"
            Then:
              BlockStatement:
                ExpressionStatement:
                  CallExpression:
                    Callee:
                      MemberExpression: .append
                        Object:
                          Variable: traits
                    Arguments:
                      Literal: "loyal"
                ExpressionStatement:
                  CallExpression:
                    Callee:
                      MemberExpression: .append
                        Object:
                          Variable: traits
                    Arguments:
                      Literal: "energetic"
          IfStatement:
            Condition:
              BinaryExpression: and
                Left:
                  BinaryExpression: ==
                    Left:
                      MemberExpression: .species1
                        Object:
                          This
                    Operator: ==
                    Right:
                      Literal: "Lion"
                Operator: and
                Right:
                  BinaryExpression: ==
                    Left:
                      MemberExpression: .species2
                        Object:
                          This
                    Operator: ==
                    Right:
                      Literal: "Lion"
            Then:
              BlockStatement:
                ExpressionStatement:
                  CallExpression:
                    Callee:
                      MemberExpression: .append
                        Object:
                          Variable: traits
                    Arguments:
                      Literal: "strong"
                ExpressionStatement:
                  CallExpression:
                    Callee:
                      MemberExpression: .append
                        Object:
                          Variable: traits
                    Arguments:
                      Literal: "proud"
          ReturnStatement:
            Value:
              Variable: traits
    FunctionDeclaration: speak
      Body:
        BlockStatement:
          IfStatement:
            Condition:
              MemberExpression: .isValidHybrid
                Object:
                  This
            Then:
              BlockStatement:
                PrintStatement:
                  InterpolatedString:
                    String: ""
                    Expression:
                      MemberExpression: .name
                        Object:
                          This
                    Expression:
                      MemberExpression: .species1
                        Object:
                          This
                    Expression:
                      MemberExpression: .species2
                        Object:
                          This
                    String: " sound"
            Else:
              BlockStatement:
                PrintStatement:
                  InterpolatedString:
                    String: ""
                    Expression:
                      MemberExpression: .name
                        Object:
                          This
                    String: " makes an unusual hybrid sound that's hard to describe"
    FunctionDeclaration: getHybridInfo
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              Expression:
                MemberExpression: .age
                  Object:
                    This
              Expression:
                MemberExpression: .species1
                  Object:
                    This
              Expression:
                MemberExpression: .species2
                  Object:
                    This
              String: "\"{self.name} is {self.age} years old and is a mix of {self.species1} and {self.species2}"
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .isValidHybrid
                  Object:
                    This
              String: "\"Valid hybrid: {self.isValidHybrid}"
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                CallExpression:
                  Callee:
                    MemberExpression: .join
                      Object:
                        MemberExpression: .traits
                          Object:
                            This
                  Arguments:
                    Literal: ", "
              String: "\"Traits: {self.traits.join(', ')}"
    FunctionDeclaration: displayTraits
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                MemberExpression: .name
                  Object:
                    This
              String: "'s traits:"
          IterStatement:
            Variables: traity
            Iterable:
              MemberExpression: .traits
                Object:
                  This
            Body:
              BlockStatement:
                PrintStatement:
                  InterpolatedString:
                    String: ""
                    Expression:
                      Variable: traity
                    String: "\"  - {traity}"
PrintStatement:
  Literal: "Inheritance test:"
VarDeclaration: dog
  Initializer:
    CallExpression:
      Callee:
        Variable: Dog
      Arguments:
        Literal: "Buddy"
        Literal: "Golden Retriever"
PrintStatement:
  Literal: "Cat class constructor:"
VarDeclaration: cat
  Initializer:
    CallExpression:
      Callee:
        Variable: Cat
      Arguments:
        Literal: "Whiskers"
PrintStatement:
  Literal: "Smart Dog class constructor:"
VarDeclaration: smartDog
  Initializer:
    CallExpression:
      Callee:
        Variable: SmartDog
      Arguments:
        Literal: "Einstein"
        Literal: "Border Collie"
        Literal: 150
VarDeclaration: eagle
  Initializer:
    CallExpression:
      Callee:
        Variable: Bird
      Arguments:
        Literal: "Sky"
        Literal: "Bald Eagle"
        Literal: true
VarDeclaration: penguin
  Initializer:
    CallExpression:
      Callee:
        Variable: Bird
      Arguments:
        Literal: "Waddles"
        Literal: "Emperor Penguin"
        Literal: false
VarDeclaration: goldfish
  Initializer:
    CallExpression:
      Callee:
        Variable: Fish
      Arguments:
        Literal: "Bubbles"
        Literal: "fresh"
VarDeclaration: shark
  Initializer:
    CallExpression:
      Callee:
        Variable: Fish
      Arguments:
        Literal: "Bruce"
        Literal: "salt"
VarDeclaration: hybrid
  Initializer:
    CallExpression:
      Callee:
        Variable: HybridPet
      Arguments:
        Literal: "Unique"
        Literal: "Cat"
        Literal: "Dog"
        Literal: 3
PrintStatement:
  Literal: "Dog methods:"
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .info
        Object:
          Variable: dog
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .speak
        Object:
          Variable: dog
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .wagTail
        Object:
          Variable: dog
PrintStatement:
  Literal: "Cat methods:"
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .info
        Object:
          Variable: cat
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .speak
        Object:
          Variable: cat
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .purr
        Object:
          Variable: cat
PrintStatement:
  Literal: "Smart dog methods:"
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .info
        Object:
          Variable: smartDog
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .speak
        Object:
          Variable: smartDog
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .solve
        Object:
          Variable: smartDog
    Arguments:
      Literal: "fetch puzzle"
PrintStatement:
  InterpolatedString:
    String: ""
    Expression:
      CallExpression:
        Callee:
          MemberExpression: .getIQ
            Object:
              Variable: smartDog
    String: "\"Einstein's IQ: {smartDog.getIQ()}"
PrintStatement:
  Literal: "Bird methods:"
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .info
        Object:
          Variable: eagle
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .speak
        Object:
          Variable: eagle
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .fly
        Object:
          Variable: eagle
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .info
        Object:
          Variable: penguin
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .speak
        Object:
          Variable: penguin
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .fly
        Object:
          Variable: penguin
PrintStatement:
  Literal: "Fish methods:"
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .info
        Object:
          Variable: goldfish
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .speak
        Object:
          Variable: goldfish
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .swim
        Object:
          Variable: goldfish
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .info
        Object:
          Variable: shark
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .speak
        Object:
          Variable: shark
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .swim
        Object:
          Variable: shark
PrintStatement:
  Literal: "Hybrid pet methods:"
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .info
        Object:
          Variable: hybrid
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .speak
        Object:
          Variable: hybrid
ExpressionStatement:
  CallExpression:
    Callee:
      MemberExpression: .getHybridInfo
        Object:
          Variable: hybrid
