Bytecode for C:\Projects\limitly\tests\error_handling\basic_error_checks.lm
Parser: New CSTParser
========================================

=== Bytecode ===
Generated 225 instructions

   0: BEGIN_FUNCTION       "divide"
   1: DEFINE_PARAM        
   2: DEFINE_PARAM        
   3: BEGIN_SCOPE         
   4: LOAD_VAR             "b"
   5: PUSH_INT             0
   6: EQUAL               
   7: JUMP_IF_FALSE        5
   8: BEGIN_SCOPE         
   9: CONSTRUCT_ERROR     
  10: RETURN              
  11: END_SCOPE           
  12: JUMP                 0
  13: LOAD_VAR             "a"
  14: LOAD_VAR             "b"
  15: DIVIDE              
  16: CONSTRUCT_OK        
  17: RETURN              
  18: END_SCOPE           
  19: PUSH_NULL           
  20: RETURN              
  21: END_FUNCTION        
  22: PUSH_FUNCTION       
  23: STORE_VAR            "divide"
  24: BEGIN_FUNCTION       "safeDivide"
  25: DEFINE_PARAM        
  26: DEFINE_PARAM        
  27: BEGIN_SCOPE         
  28: LOAD_VAR             "x"
  29: LOAD_VAR             "y"
  30: CALL                 "divide"
  31: CHECK_ERROR         
  32: JUMP_IF_FALSE        1
  33: PROPAGATE_ERROR     
  34: UNWRAP_VALUE        
  35: STORE_VAR            "result"
  36: LOAD_VAR             "result"
  37: CONSTRUCT_OK        
  38: RETURN              
  39: END_SCOPE           
  40: PUSH_NULL           
  41: RETURN              
  42: END_FUNCTION        
  43: PUSH_FUNCTION       
  44: STORE_VAR            "safeDivide"
  45: BEGIN_FUNCTION       "incompatiblePropagate"
  46: DEFINE_PARAM        
  47: DEFINE_PARAM        
  48: BEGIN_SCOPE         
  49: LOAD_VAR             "x"
  50: LOAD_VAR             "y"
  51: CALL                 "divide"
  52: CHECK_ERROR         
  53: JUMP_IF_FALSE        1
  54: PROPAGATE_ERROR     
  55: UNWRAP_VALUE        
  56: STORE_VAR            "result"
  57: LOAD_VAR             "result"
  58: CONSTRUCT_OK        
  59: RETURN              
  60: END_SCOPE           
  61: PUSH_NULL           
  62: RETURN              
  63: END_FUNCTION        
  64: PUSH_FUNCTION       
  65: STORE_VAR            "incompatiblePropagate"
  66: BEGIN_FUNCTION       "nonFallibleWithPropagation"
  67: DEFINE_PARAM        
  68: DEFINE_PARAM        
  69: BEGIN_SCOPE         
  70: LOAD_VAR             "x"
  71: LOAD_VAR             "y"
  72: CALL                 "divide"
  73: CHECK_ERROR         
  74: JUMP_IF_FALSE        1
  75: PROPAGATE_ERROR     
  76: UNWRAP_VALUE        
  77: STORE_VAR            "result"
  78: LOAD_VAR             "result"
  79: RETURN              
  80: END_SCOPE           
  81: PUSH_NULL           
  82: RETURN              
  83: END_FUNCTION        
  84: PUSH_FUNCTION       
  85: STORE_VAR            "nonFallibleWithPropagation"
  86: BEGIN_FUNCTION       "unhandledFallible"
  87: DEFINE_PARAM        
  88: DEFINE_PARAM        
  89: BEGIN_SCOPE         
  90: LOAD_VAR             "x"
  91: LOAD_VAR             "y"
  92: CALL                 "divide"
  93: POP                 
  94: END_SCOPE           
  95: PUSH_NULL           
  96: RETURN              
  97: END_FUNCTION        
  98: PUSH_FUNCTION       
  99: STORE_VAR            "unhandledFallible"
 100: BEGIN_FUNCTION       "genericError"
 101: DEFINE_PARAM        
 102: BEGIN_SCOPE         
 103: LOAD_VAR             "flag"
 104: JUMP_IF_FALSE        5
 105: BEGIN_SCOPE         
 106: CONSTRUCT_ERROR     
 107: RETURN              
 108: END_SCOPE           
 109: JUMP                 0
 110: PUSH_INT             42
 111: CONSTRUCT_OK        
 112: RETURN              
 113: END_SCOPE           
 114: PUSH_NULL           
 115: RETURN              
 116: END_FUNCTION        
 117: PUSH_FUNCTION       
 118: STORE_VAR            "genericError"
 119: BEGIN_FUNCTION       "propagateGeneric"
 120: DEFINE_PARAM        
 121: BEGIN_SCOPE         
 122: LOAD_VAR             "flag"
 123: CALL                 "genericError"
 124: CHECK_ERROR         
 125: JUMP_IF_FALSE        1
 126: PROPAGATE_ERROR     
 127: UNWRAP_VALUE        
 128: STORE_VAR            "result"
 129: LOAD_VAR             "result"
 130: CONSTRUCT_OK        
 131: RETURN              
 132: END_SCOPE           
 133: PUSH_NULL           
 134: RETURN              
 135: END_FUNCTION        
 136: PUSH_FUNCTION       
 137: STORE_VAR            "propagateGeneric"
 138: BEGIN_FUNCTION       "multipleErrors"
 139: DEFINE_PARAM        
 140: BEGIN_SCOPE         
 141: LOAD_VAR             "x"
 142: PUSH_INT             0
 143: LESS                
 144: JUMP_IF_FALSE        5
 145: BEGIN_SCOPE         
 146: CONSTRUCT_ERROR     
 147: RETURN              
 148: END_SCOPE           
 149: JUMP                 0
 150: LOAD_VAR             "x"
 151: PUSH_INT             100
 152: GREATER             
 153: JUMP_IF_FALSE        5
 154: BEGIN_SCOPE         
 155: CONSTRUCT_ERROR     
 156: RETURN              
 157: END_SCOPE           
 158: JUMP                 0
 159: LOAD_VAR             "x"
 160: CONSTRUCT_OK        
 161: RETURN              
 162: END_SCOPE           
 163: PUSH_NULL           
 164: RETURN              
 165: END_FUNCTION        
 166: PUSH_FUNCTION       
 167: STORE_VAR            "multipleErrors"
 168: BEGIN_FUNCTION       "unknownErrorType"
 169: BEGIN_SCOPE         
 170: CONSTRUCT_ERROR     
 171: RETURN              
 172: END_SCOPE           
 173: PUSH_NULL           
 174: RETURN              
 175: END_FUNCTION        
 176: PUSH_FUNCTION       
 177: STORE_VAR            "unknownErrorType"
 178: BEGIN_FUNCTION       "typeMismatch"
 179: BEGIN_SCOPE         
 180: PUSH_STRING          "hello"
 181: STORE_VAR            "x"
 182: END_SCOPE           
 183: PUSH_NULL           
 184: RETURN              
 185: END_FUNCTION        
 186: PUSH_FUNCTION       
 187: STORE_VAR            "typeMismatch"
 188: BEGIN_FUNCTION       "correctAssignment"
 189: BEGIN_SCOPE         
 190: PUSH_INT             42
 191: CONSTRUCT_OK        
 192: STORE_VAR            "x"
 193: CONSTRUCT_ERROR     
 194: STORE_VAR            "y"
 195: END_SCOPE           
 196: PUSH_NULL           
 197: RETURN              
 198: END_FUNCTION        
 199: PUSH_FUNCTION       
 200: STORE_VAR            "correctAssignment"
 201: BEGIN_FUNCTION       "wrongArguments"
 202: BEGIN_SCOPE         
 203: PUSH_STRING          "hello"
 204: PUSH_STRING          "world"
 205: CALL                 "divide"
 206: POP                 
 207: END_SCOPE           
 208: PUSH_NULL           
 209: RETURN              
 210: END_FUNCTION        
 211: PUSH_FUNCTION       
 212: STORE_VAR            "wrongArguments"
 213: PUSH_STRING          "Testing basic compile-time error checking"
 214: PRINT               
 215: PUSH_INT             10
 216: PUSH_INT             2
 217: CALL                 "safeDivide"
 218: STORE_VAR            "result1"
 219: PUSH_BOOL            false
 220: CALL                 "propagateGeneric"
 221: STORE_VAR            "result2"
 222: PUSH_STRING          "Basic error checking test completed"
 223: PRINT               
 224: HALT                

