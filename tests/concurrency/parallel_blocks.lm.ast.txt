AST for C:\Projects\limitly\tests\concurrency\parallel_blocks.lm
Parser: New CSTParser (cst_parser.cpp)
Mode: CST with AST compatibility
Note: CST nodes were created internally with trivia preservation
      AST output shown below for compatibility testing
========================================

AST Dump:
==========
PrintStatement:
  Literal: "=== Parallel Block Tests ==="
VarDeclaration: messages
  Initializer:
    CallExpression:
      Callee:
        Variable: channel
ParallelStatement:
  BlockStatement:
    TaskStatement
      LoopVar: i
      Iterable:
        RangeExpression:
          Start:
            Literal: 1
          End:
            Literal: 3
          Inclusive: true
      Body:
        BlockStatement:
          PrintStatement:
            InterpolatedString:
              String: ""
              Expression:
                Variable: i
              String: " running"
          ExpressionStatement:
            CallExpression:
              Callee:
                Variable: sleep
              Arguments:
                CallExpression:
                  Callee:
                    Variable: randint
                  Arguments:
                    Literal: 1
                    Literal: 3
          ExpressionStatement:
            CallExpression:
              Callee:
                MemberExpression: .send
                  Object:
                    Variable: messages
              Arguments:
                InterpolatedString:
                  String: ""
                  Expression:
                    Variable: i
                  String: " done"
IterStatement:
  Variables: message
  Iterable:
    Variable: messages
  Body:
    BlockStatement:
      PrintStatement:
        InterpolatedString:
          String: ""
          Expression:
            Variable: message
          String: "\"Received: {message}"
VarDeclaration: files_out
  Initializer:
    CallExpression:
      Callee:
        Variable: channel
ParallelStatement:
  BlockStatement:
    WorkerStatement
      Parameter: chunk
      Body:
        BlockStatement:
          ExpressionStatement:
            CallExpression:
              Callee:
                Variable: process_chunk
              Arguments:
                Variable: chunk
          ExpressionStatement:
            CallExpression:
              Callee:
                MemberExpression: .send
                  Object:
                    Variable: files_out
              Arguments:
                InterpolatedString:
                  String: ""
                  Expression:
                    MemberExpression: .id
                      Object:
                        Variable: chunk
                  String: " processed"
IterStatement:
  Variables: msg
  Iterable:
    Variable: files_out
  Body:
    BlockStatement:
      PrintStatement:
        Variable: msg
