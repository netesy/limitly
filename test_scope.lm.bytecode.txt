Bytecode for test_scope.lm
Parser: New Unified Parser (CST mode)
========================================

=== Bytecode ===
Generated 132 instructions

   0: PUSH_STRING          "Mixed loops (iter outer, for inner):"
   1: PRINT               
   2: PUSH_INT             1
   3: PUSH_INT             3
   4: CREATE_RANGE        
   5: GET_ITERATOR        
   6: STORE_TEMP          
   7: LOAD_TEMP           
   8: ITERATOR_HAS_NEXT   
   9: JUMP_IF_FALSE        36
  10: LOAD_TEMP           
  11: ITERATOR_NEXT       
  12: STORE_VAR            "i"
  13: BEGIN_SCOPE         
  14: PUSH_INT             0
  15: STORE_VAR            "j"
  16: BEGIN_SCOPE         
  17: LOAD_VAR             "j"
  18: PUSH_INT             5
  19: LESS                
  20: JUMP_IF_FALSE        22
  21: JUMP                 7
  22: LOAD_VAR             "j"
  23: PUSH_INT             1
  24: ADD                 
  25: DUP                 
  26: STORE_VAR            "j"
  27: POP                 
  28: JUMP                 -12
  29: BEGIN_SCOPE         
  30: PUSH_STRING          "iter-for: ("
  31: LOAD_VAR             "i"
  32: PUSH_STRING         
  33: CONCAT              
  34: PUSH_STRING          ", "
  35: LOAD_VAR             "j"
  36: PUSH_STRING         
  37: CONCAT              
  38: PUSH_STRING          ")"
  39: INTERPOLATE_STRING  
  40: PRINT               
  41: END_SCOPE           
  42: JUMP                 -21
  43: END_SCOPE           
  44: END_SCOPE           
  45: JUMP                 -39
  46: CLEAR_TEMP          
  47: PUSH_INT             2
  48: STORE_VAR            "start"
  49: PUSH_INT             7
  50: STORE_VAR            "end"
  51: PUSH_STRING          "Range with variables ("
  52: LOAD_VAR             "start"
  53: PUSH_STRING         
  54: CONCAT              
  55: PUSH_STRING          " to "
  56: LOAD_VAR             "end"
  57: PUSH_STRING         
  58: CONCAT              
  59: PUSH_STRING          "):"
  60: INTERPOLATE_STRING  
  61: PRINT               
  62: LOAD_VAR             "start"
  63: LOAD_VAR             "end"
  64: CREATE_RANGE        
  65: GET_ITERATOR        
  66: STORE_TEMP          
  67: LOAD_TEMP           
  68: ITERATOR_HAS_NEXT   
  69: JUMP_IF_FALSE        13
  70: LOAD_TEMP           
  71: ITERATOR_NEXT       
  72: STORE_VAR            "k"
  73: BEGIN_SCOPE         
  74: PUSH_STRING          "k = "
  75: LOAD_VAR             "k"
  76: PUSH_STRING         
  77: CONCAT              
  78: PUSH_STRING         
  79: INTERPOLATE_STRING  
  80: PRINT               
  81: END_SCOPE           
  82: JUMP                 -16
  83: CLEAR_TEMP          
  84: PUSH_INT             0
  85: PUSH_INT             2000
  86: CREATE_RANGE        
  87: CALL                 "debug"
  88: POP                 
  89: PUSH_INT             0
  90: PUSH_INT             2000
  91: CREATE_RANGE        
  92: PRINT               
  93: PUSH_STRING          "Variable scope test: new Issue"
  94: PRINT               
  95: PUSH_INT             100
  96: STORE_VAR            "outer"
  97: PUSH_INT             0
  98: STORE_VAR            "i"
  99: BEGIN_SCOPE         
 100: LOAD_VAR             "i"
 101: PUSH_INT             4
 102: LESS                
 103: JUMP_IF_FALSE        26
 104: JUMP                 7
 105: LOAD_VAR             "i"
 106: PUSH_INT             1
 107: ADD                 
 108: DUP                 
 109: STORE_VAR            "i"
 110: POP                 
 111: JUMP                 -12
 112: BEGIN_SCOPE         
 113: LOAD_VAR             "i"
 114: PUSH_INT             10
 115: MULTIPLY            
 116: STORE_VAR            "inner"
 117: PUSH_STRING          "outer: "
 118: LOAD_VAR             "outer"
 119: PUSH_STRING         
 120: CONCAT              
 121: PUSH_STRING          ", inner: "
 122: LOAD_VAR             "inner"
 123: PUSH_STRING         
 124: CONCAT              
 125: PUSH_STRING         
 126: INTERPOLATE_STRING  
 127: PRINT               
 128: END_SCOPE           
 129: JUMP                 -25
 130: END_SCOPE           
 131: HALT                

