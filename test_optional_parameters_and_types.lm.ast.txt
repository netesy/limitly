AST for test_optional_parameters_and_types.lm
Parser: New Unified Parser (CST mode)
Mode: CST with AST compatibility
Note: CST nodes were created internally with trivia preservation
      AST output shown below for compatibility testing
========================================

AST Dump:
==========
FunctionDeclaration: formatMessage
  Parameters:
    text: str
    prefix (optional): str?
    suffix (optional): str?
  ReturnType: str
  Body:
    BlockStatement:
      VarDeclaration: result
        Initializer:
          Variable: text
      IfStatement:
        Condition:
          Variable: prefix
        Then:
          BlockStatement:
            ExpressionStatement:
              Assignment: =
                Target: result
                Value:
                BinaryExpression: +
                  Left:
                    Variable: prefix
                  Operator: +
                  Right:
                    Variable: result
      IfStatement:
        Condition:
          Variable: suffix
        Then:
          BlockStatement:
            ExpressionStatement:
              Assignment: =
                Target: result
                Value:
                BinaryExpression: +
                  Left:
                    Variable: result
                  Operator: +
                  Right:
                    Variable: suffix
      ReturnStatement:
        Value:
          Variable: result
FunctionDeclaration: processValue
  Parameters:
    multiplier: int
    value (optional): int?
  ReturnType: int?
  Body:
    BlockStatement:
      IfStatement:
        Condition:
          Variable: value
        Then:
          BlockStatement:
            ReturnStatement:
              Value:
                BinaryExpression: *
                  Left:
                    Variable: value
                  Operator: *
                  Right:
                    Variable: multiplier
        Else:
          BlockStatement:
            ReturnStatement:
              Value:
                Literal: nil
VarDeclaration: formatter
  Type: () -> str
VarDeclaration: processor
  Type: () -> int
FunctionDeclaration: findUser
  Parameters:
    id: int
  ReturnType: str?
  Body:
    BlockStatement:
      IfStatement:
        Condition:
          BinaryExpression: >
            Left:
              Variable: id
            Operator: >
            Right:
              Literal: 0
        Then:
          BlockStatement:
            ReturnStatement:
              Value:
                BinaryExpression: +
                  Left:
                    Literal: User
                  Operator: +
                  Right:
                    Variable: id
        Else:
          BlockStatement:
            ReturnStatement:
              Value:
                Literal: nil
PrintStatement:
  Literal: Optional parameters and types test completed
