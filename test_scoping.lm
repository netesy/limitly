// Test 1: Basic scoping - inner scope accessing outer scope
var outer = 10;
{
    // Should be able to access outer variable
    print("Outer value in inner scope: " + outer);
    var inner = 20;
    print("Inner value: " + inner);
}
print("Outer value: " + outer);
// inner should not be accessible here
// print("Inner value outside scope: " + inner);  // This should cause an error

// Test 2: Variable shadowing
var x = 1;
print("Outer x: " + x);
{
    var x = 2;  // This should shadow the outer x
    print("Inner x: " + x);  // Should print 2
}
print("Outer x again: " + x);  // Should still be 1

// Test 3: Loop scoping
var i = 0;
for (var j = 0; j < 3; j += 1) {
    var k = j * 2;
    print("j: " + j + ", k: " + k);
}
// j and k should not be accessible here
// print("j outside loop: " + j);  // Should cause error
// print("k outside loop: " + k);  // Should cause error

// Test 4: Function scoping
fn testFunc(x: int): int {
    var y = x * 2;
    print("Inside function - x: " + x + ", y: " + y);
    return y;
}

var result = testFunc(5);
print("Function result: " + result);
// x and y should not be accessible here
// print("x outside function: " + x);  // Should cause error
// print("y outside function: " + y);  // Should cause error

print("");
// Test 5: Nested Iter 
print("Nested Iter Statement");
iter (var i in [1, 2, 3, 4, 5]) {

    print("Before inner: {i}");
    
    iter (var j in [10, 20, 30]) {

        print("  Inner: {j}");
    }
}

// Test 6: Nested Iter Statements with variable scoping
print("Nested Iter Statements with variable scoping");
print("Checking the variable scoping inside nested iter");

iter (var i in [1, 2, 3, 4, 5]) {

    print("Before inner: {i}");
    
    iter (var j in [10, 20, 30]) {

        print("Outer: {i}  Inner: {j}");
    }
}

// Test 7: Complex shadowing
var a = 1;
{
    var a = 2;
    {
        var a = 3;
        print("Innermost a: " + a); // Should print 3
    }
    print("Middle a: " + a); // Should print 2
}
print("Outermost a: " + a); // Should print 1


// Test 8: scoping and assignments 
var outer = 10;
{
    // Should be able to access outer variable
    print("Outer value in inner scope: " + outer);
    outer = 20;
    print("Inner scope value: " + outer);
}
print("Outer value: " + outer); //should print 20


// Test 9: scoping and assignments 
var outer = 10;
{
    // Should be able to access outer variable
    print("Outer value in inner scope: " + outer);
    outer += 20;
    print("Inner scope value: " + outer);
}
print("Outer value: " + outer); //should print 30